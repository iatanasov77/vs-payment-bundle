parameters:
    vs_payment.form.type.promotion.validation_groups: ['sylius']
    vs_payment.form.type.promotion_action.validation_groups: ['sylius']
    vs_payment.form.type.promotion_rule.validation_groups: ['sylius']
    vs_payment.form.type.promotion_coupon.validation_groups: ['sylius']


services:
    _defaults:
        public: true
        
    
    vs_payment.registry_promotion_rule_checker:
        class: Sylius\Component\Registry\ServiceRegistry
        arguments:
            - 'Sylius\Component\Promotion\Checker\Rule\RuleCheckerInterface'
            - 'rule checker'
    vs_payment.form_registry.promotion_rule_checker:
        class: Sylius\Bundle\ResourceBundle\Form\Registry\FormTypeRegistry
        
    vs_payment.registry_promotion_action:
        class: Sylius\Component\Registry\ServiceRegistry
        arguments:
            - 'Sylius\Component\Promotion\Action\PromotionActionCommandInterface'
            - 'promotion action'
    vs_payment.form_registry.promotion_action:
        class: Sylius\Bundle\ResourceBundle\Form\Registry\FormTypeRegistry
        
        
    ##################################################################################
    # Forms
    ##################################################################################
    vs_payment.form.promotion:
        class: Vankosoft\PaymentBundle\Form\PromotionForm
        tags:
            - { name: form.type }
        arguments:
            - '%vs_payment.model.promotion.class%'
            - '@request_stack'
            - '@vs_application.repository.locale'
            
    vs_payment.form.promotion_coupon:
        class: Vankosoft\PaymentBundle\Form\PromotionCouponForm
        tags:
            - { name: form.type }
        arguments:
            - '%vs_payment.model.promotion_coupon.class%'
    
    vs_payment.form.type.promotion_action.collection:
        class: Vankosoft\PaymentBundle\Form\Type\PromotionActionCollectionType
        tags:
            - { name: form.type }
        arguments:
            - '@vs_payment.registry_promotion_action'
            
    vs_payment.form.type.promotion_rule.collection:
        class: Vankosoft\PaymentBundle\Form\Type\PromotionRuleCollectionType
        tags:
            - { name: form.type }
        arguments:
            - '@vs_payment.registry_promotion_rule_checker'
            
    vs_payment.form.type.promotion_action_choice:
        class: Vankosoft\PaymentBundle\Form\Type\PromotionActionChoiceType
        tags:
            - { name: form.type }
        arguments:
            - '%vs_payment.promotion_actions%'
            
    vs_payment.form.type.promotion_rule_choice:
        class: Vankosoft\PaymentBundle\Form\Type\PromotionRuleChoiceType
        tags:
            - { name: form.type }
        arguments:
            - '%vs_payment.promotion_rules%'
            
    vs_payment.form.type.promotion_action:
        class: Vankosoft\PaymentBundle\Form\Type\PromotionActionType
        tags:
            - { name: form.type }
        arguments:
            - '%vs_payment.model.promotion_action.class%'
            - '%vs_payment.form.type.promotion_action.validation_groups%'
            - '@vs_payment.form_registry.promotion_action'
            
    sylius.form.type.promotion_rule:
        class: Vankosoft\PaymentBundle\Form\Type\PromotionRuleType
        tags:
            - { name: form.type }
        arguments:
            - '%vs_payment.model.promotion_rule.class%'
            - '%vs_payment.form.type.promotion_rule.validation_groups%'
            - '@vs_payment.form_registry.promotion_rule_checker'





#         <service id="sylius.custom_factory.promotion_coupon" class="Sylius\Component\Promotion\Factory\PromotionCouponFactory" decorates="sylius.factory.promotion_coupon" decoration-priority="256" public="false">
#             <argument type="service" id="sylius.custom_factory.promotion_coupon.inner" />
#         </service>
#         <service id="Sylius\Component\Promotion\Factory\PromotionCouponFactoryInterface" alias="sylius.factory.promotion_coupon" />
# 
#         <service id="sylius.promotion_processor" class="Sylius\Component\Promotion\Processor\PromotionProcessor">
#             <argument type="service" id="sylius.active_promotions_provider" />
#             <argument type="service" id="sylius.promotion_eligibility_checker" />
#             <argument type="service" id="sylius.promotion_applicator" />
#         </service>
#         <service id="Sylius\Component\Promotion\Processor\PromotionProcessorInterface" alias="sylius.promotion_processor" />
# 
#         <service id="sylius.promotion_rule_checker.cart_quantity" class="Sylius\Component\Promotion\Checker\Rule\CartQuantityRuleChecker">
#             <tag name="sylius.promotion_rule_checker" type="cart_quantity" label="sylius.form.promotion_rule.cart_quantity" form-type="Sylius\Bundle\PromotionBundle\Form\Type\Rule\CartQuantityConfigurationType" />
#         </service>
# 
#         <service id="sylius.promotion_applicator" class="Sylius\Component\Promotion\Action\PromotionApplicator">
#             <argument type="service" id="sylius.registry_promotion_action" />
#         </service>
#         <service id="Sylius\Component\Promotion\Action\PromotionApplicatorInterface" alias="sylius.promotion_applicator" />

    
            
 

#         <service id="sylius.active_promotions_provider" class="Sylius\Component\Promotion\Provider\ActivePromotionsProvider">
#             <argument type="service" id="sylius.repository.promotion" />
#         </service>
#         <service id="Sylius\Component\Promotion\Provider\ActivePromotionsProvider" alias="sylius.active_promotions_provider" />
# 
#         <service id="sylius.promotion_coupon_generator" class="Sylius\Component\Promotion\Generator\PromotionCouponGenerator">
#             <argument type="service" id="sylius.factory.promotion_coupon" />
#             <argument type="service" id="sylius.repository.promotion_coupon" />
#             <argument type="service" id="sylius.manager.promotion_coupon" />
#             <argument type="service" id="sylius.promotion_coupon_generator.percentage_policy" />
#         </service>
#         <service id="Sylius\Component\Promotion\Generator\PromotionCouponGeneratorInterface" alias="sylius.promotion_coupon_generator" />
# 
#         <service id="sylius.promotion_coupon_generator.percentage_policy" class="Sylius\Component\Promotion\Generator\PercentageGenerationPolicy">
#             <argument type="service" id="sylius.repository.promotion_coupon" />
#         </service>