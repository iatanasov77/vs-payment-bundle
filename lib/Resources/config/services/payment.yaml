services:
    _defaults:
        autowire: true
        autoconfigure: true
        
    vs_payment_payment:
        class: Vankosoft\PaymentBundle\Component\Payment\Payment
    
    Vankosoft\PaymentBundle\Controller\Checkout\:
        resource: '../../../Controller/Checkout'
        tags: ['controller.service_arguments']
        autowire: true

    Vankosoft\PaymentBundle\Controller\Checkout\PaymentController:
        tags: ['controller.service_arguments']
        autowire: false
        arguments:
            - '@doctrine'
            - '@vs_users.security_bridge'
            - '@vs_payment_payment'
            - '@vs_payment.factory.order'
            - '@vs_payment.factory.order_item'
            - '@vs_payment.repository.order'
            - '@vs_payment.repository.product'
            - '@vs_users_subscriptions.repository.payed_service_subscription_period'
        calls:
            - [ setContainer, [ '@service_container' ] ]
            
    Vankosoft\PaymentBundle\Form\PaymentForm:
        tags: ['form.type']
        arguments:
            - '%vs_payment.model.payment_method.class%'
            
    ########################################################################
    # ShoppingCart Controllers
    ########################################################################
    Vankosoft\PaymentBundle\Controller\ShoppingCart\:
        resource: '../../../Controller/ShoppingCart'
        tags: ['controller.service_arguments']
        autowire: true
    Vankosoft\PaymentBundle\Controller\ShoppingCart\ShoppingCartController:
        tags: ['controller.service_arguments']
        autowire: false
        arguments:
            - '@vs_users.security_bridge'
            - '@vs_payment.repository.order'
        calls:
            - [ setContainer, [ '@service_container' ] ]
