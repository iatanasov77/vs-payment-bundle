services:
    _defaults:
        autowire: true
        autoconfigure: true
        public: true
        
    ########################################################################
    # Custom Stripe Actions
    ########################################################################
    Vankosoft\PaymentBundle\Form\Stripe\PlanForm:
        tags:
            - { name: form.type }
        arguments:
            - '%vs_payment.model.currency.class%'
            
    Vankosoft\PaymentBundle\Form\Stripe\PriceForm:
        tags:
            - { name: form.type }
        arguments:
            - '@vs_payment.stripe_api'
            - '%vs_payment.model.currency.class%'
            - '%vs_payment.model.pricing_plan.class%'
    
    vs_payment.stripe_api:
        class: Vankosoft\PaymentBundle\Component\Payum\Stripe\Api
        arguments:
            - '@payum'
            
    #######################################################
    # Stripe Subscriptions
    #######################################################
    vs_payment.stripe_list_plans:
        class: Vankosoft\PaymentBundle\Component\Payum\Stripe\Action\Api\GetPlansAction
        tags:
            - { name: payum.action, factory: stripe_js }
            
    vs_payment.stripe_list_products:
        class: Vankosoft\PaymentBundle\Component\Payum\Stripe\Action\Api\GetProductsAction
        tags:
            - { name: payum.action, factory: stripe_js }
            
    vs_payment.stripe_create_product:
        class: Vankosoft\PaymentBundle\Component\Payum\Stripe\Action\Api\CreateProductAction
        tags:
            - { name: payum.action, factory: stripe_js }
            
    vs_payment.stripe_list_prices:
        class: Vankosoft\PaymentBundle\Component\Payum\Stripe\Action\Api\GetPricesAction
        tags:
            - { name: payum.action, factory: stripe_js }
            
    vs_payment.stripe_create_price:
        class: Vankosoft\PaymentBundle\Component\Payum\Stripe\Action\Api\CreatePriceAction
        tags:
            - { name: payum.action, factory: stripe_js }
            
    vs_payment.stripe_list_subscriptions:
        class: Vankosoft\PaymentBundle\Component\Payum\Stripe\Action\Api\GetSubscriptionsAction
        tags:
            - { name: payum.action, factory: stripe_js }
            
    vs_payment.stripe_cancel_subscription:
        class: Vankosoft\PaymentBundle\Component\Payum\Stripe\Action\Api\CancelSubscriptionAction
        tags:
            - { name: payum.action, factory: stripe_js }
            
    vs_payment.stripe_list_webhook_endpoints:
        class: Vankosoft\PaymentBundle\Component\Payum\Stripe\Action\Api\GetWebhookEndpointsAction
        tags:
            - { name: payum.action, factory: stripe_js }
            
    vs_payment.stripe_create_webhook_endpoint:
        class: Vankosoft\PaymentBundle\Component\Payum\Stripe\Action\Api\CreateWebhookEndpointAction
        tags:
            - { name: payum.action, factory: stripe_js }
            
    #######################################################
    # Stripe Coupons
    #######################################################
    vs_payment.stripe_list_coupons:
        class: Vankosoft\PaymentBundle\Component\Payum\Stripe\Action\Api\GetCouponsAction
        tags:
            - { name: payum.action, factory: stripe_js }
            
    vs_payment.stripe_create_coupon:
        class: Vankosoft\PaymentBundle\Component\Payum\Stripe\Action\Api\CreateCouponAction
        tags:
            - { name: payum.action, factory: stripe_js }
            
    vs_payment.stripe_retrieve_coupon:
        class: Vankosoft\PaymentBundle\Component\Payum\Stripe\Action\Api\RetrieveCouponAction
        tags:
            - { name: payum.action, factory: stripe_js }
            
    vs_payment.stripe_delete_coupon:
        class: Vankosoft\PaymentBundle\Component\Payum\Stripe\Action\Api\DeleteCouponAction
        tags:
            - { name: payum.action, factory: stripe_js }
            
    #######################################################
    # TelephoneCall Services
    #######################################################
    payum.action.obtain_coupon_code:
        class: Vankosoft\PaymentBundle\CustomGateways\TelephoneCall\Action\ObtainCouponCodeAction
        public: true
        arguments:
            - '@form.factory'
            - 'payum.template.obtain_coupon_code'
        tags:
            - { name: payum.action, factory: telephone_call, gateway: telephone_call, all: true, alias: telephone_call, prepend: false }
            
    payum.action.obtain_coupon_code_builder:
        class: Vankosoft\PaymentBundle\CustomGateways\TelephoneCall\ActionBuilder\ObtainCouponCodeActionBuilder
        arguments:
            - '@form.factory'
            - '@request_stack'
    
    payum.form.type.coupon_code:
        class: Vankosoft\PaymentBundle\CustomGateways\TelephoneCall\ActionBuilder\CouponCodeForm
        tags:
            - { name: form.type }


